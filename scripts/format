#!/usr/bin/env bash
set -euo pipefail

# ------------------------------------------------------------
# 1. Удаляем неиспользуемые импорты (F401/F841) и
#    сортируем оставшиеся (I###) — «исправляем» только эти коды.
# ------------------------------------------------------------
ruff check \
  --select F401,F841,I \
  --fix \
  pybotx_smartapp_rpc tests

# ------------------------------------------------------------
# 2. Применяем Black-совместимое форматирование
#    (эквивалент: `black app tests`)
# ------------------------------------------------------------
ruff format pybotx_smartapp_rpc tests